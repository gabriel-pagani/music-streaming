DROP TABLE IF EXISTS USUARIOS;

CREATE TABLE USUARIOS (
    ID INT IDENTITY(1,1) PRIMARY KEY,        
    
    -- Campos de informações pessoais
    EMAIL VARCHAR(255) NOT NULL,
    SENHA VARCHAR(100) NOT NULL,
    NOME VARCHAR(100) NOT NULL,
    CPF CHAR(11),
    TELEFONE CHAR(11),
    DATA_NASCIMENTO DATE,
    
    -- Campos de endereço
    ESTADO VARCHAR(50),
    CIDADE VARCHAR(100),
    BAIRRO VARCHAR(100),
    LOGRADOURO VARCHAR(200),
    NUMERO VARCHAR(10),
    COMPLEMENTO VARCHAR(200),
    CEP CHAR(8),
    
    -- Campos de cartão
    NUMERO_CARTAO VARBINARY(256),
    NOME_CARTAO VARBINARY(256),
    VENCIMENTO_CARTAO VARBINARY(256),
    CODIGO_CARTAO VARBINARY(256),
    ULTIMOS_DIGITOS_CARTAO CHAR(4),
    
    -- Campos de informações internas
    TIPO VARCHAR(8) CHECK (TIPO IN ('Premium', 'Standard')) DEFAULT 'Standard',
    DATA_CADASTRO DATETIME DEFAULT GETDATE(),
    DATA_ATUALIZACAO DATETIME,
    OBSERVACOES NVARCHAR(1000)
);
CREATE UNIQUE INDEX IDX_EMAIL ON USUARIOS(EMAIL);
CREATE UNIQUE INDEX IDX_CPF ON USUARIOS(CPF) WHERE CPF IS NOT NULL;
CREATE UNIQUE INDEX IDX_TELEFONE ON USUARIOS(TELEFONE) WHERE TELEFONE IS NOT NULL;
